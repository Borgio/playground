#
# A template to create a pipeline build configuration from scratch. The pipeline logic is specified
# as a reference to a repository Jenkinsfile
#

apiVersion: v1
kind: Template
metadata:
  name: novaordis-pipeline-Jenkinsfile-build-configuration
parameters:
- name: APPLICATION_NAME
  value: noss
  displayName: The application name.
  description: The name used when creating all the application objects and labels.
  required: true
- name: GIT_REPOSITORY_URL
  displayName: The application Git repository URL.
  description: |
    The URL of the application source code repository. The repository must contain a Jenkinsfile in the directory
    whose path is specified as JENKINSFILE_DIR_PATH
  required: true
- name: JENKINSFILE_DIR_PATH
  displayName: Jenkinsfile directory path relative to the repository root.
  description: Jenkinsfile directory path relative to the repository root.
  required: true
objects:
- apiVersion: v1
  kind: BuildConfig
  metadata:
    name: ${APPLICATION_NAME}
  spec:
    source:
      git:
        uri: ${GIT_REPOSITORY_URL}
    strategy:
      type: JenkinsPipeline
      jenkinsPipelineStrategy:
        jenkinsfilePath: ${JENKINSFILE_DIR_PATH}