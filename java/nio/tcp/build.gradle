/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */


    apply plugin: 'java'

    repositories {

        mavenLocal()
        mavenCentral()
    }

dependencies {

//    implementation project(':server'), project(':client')
}

apply plugin: 'application'

//
// this generates the client wrapper script
//

task clientStartScript(type: CreateStartScripts) {

    applicationName = 'client'
    mainClassName = 'playground.java.nio.tcp.ClientMain'

    //
    // get the rest of the configuration from the already configured 'startScripts' task;
    // except 'applicationName' and 'mainClassName', the rest of the configuration should
    // be similar
    //
    def t = rootProject.tasks.getByPath('startScripts');
    classpath = t.classpath;
    outputDir = t.outputDir;
}

//
// this configures the main 'startScript' task to generate the server script
//
def t = rootProject.tasks.getByPath('startScripts');
t.applicationName = 'server';
t.mainClassName = 'playground.java.nio.tcp.ServerMain';
t.dependsOn(clientStartScript); // trigger 'clientStartScript' execution automatically


defaultTasks 'distZip'
